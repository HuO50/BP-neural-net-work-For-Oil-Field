clear;
clc;
D1=[64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	64.79	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	63.74	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	58.31	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	69.32	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	67.02	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	64.63	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	59.17	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	58.43	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	60.38	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	59.79	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	57.03	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	56.25	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	70.56	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	68.83	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	39.39	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	58.89	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	54.77	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	43.15	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.36	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	50.79	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	47.08	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	33.3	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	31.17	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.21	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.2	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77	29.77];
D=premnmx(D1)%数据归一化把数据化到[-1,1]范围内
Q=length(D);
count = 1:1:Q;
X=zeros(100,0);%构造一个数组,该数组全是0
X(1,2:Q)=D(1,1:(Q-1));
X(2,3:Q)=D(1,1:(Q-2));
X(3,4:Q)=D(1,1:(Q-3));
X(4,5:Q)=D(1,1:(Q-4));
X(5,6:Q)=D(1,1:(Q-5));
X(6,7:Q)=D(1,1:(Q-6));
figure;
plot(count,D,count,D,'*'); %绘制原始数据分布图（附录：3-1）

net=newff(minmax(X),[15 1],{'tansig','tansig'})
net.trainParam.epochs = 3000;
net.trainParam.goal=0.005;
net=train(net,X,D);
O=sim(net,X);
figure;
plot(count,D,'*',count,O,'r'); %绘制训练后得到的结果和误差曲线（附录：3-2、3-3）
V = net.iw{1,1}%输入层到中间层权值
theta1 = net.b{1}%中间层各神经元阈值
W = net.lw{2,1}%中间层到输出层权值
theta2 = net.b{2}%输出层各神经元阈值
